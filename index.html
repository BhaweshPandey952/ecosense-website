<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSense - Smart Home Solutions</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            @apply bg-slate-50 text-slate-800;
        }

        .text-gradient {
            background-image: linear-gradient(to right, #10b981, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        .section {
            padding-top: 4rem;
            padding-bottom: 4rem;
        }

        @media (min-width: 768px) {
            .section {
                padding-top: 6rem;
                padding-bottom: 6rem;
            }
        }

        .nav-link {
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #10b981;
            /* emerald-500 */
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-8px);
            @apply shadow-2xl;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #10b981;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .gallery-thumbnail {
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .gallery-thumbnail:hover,
        .gallery-thumbnail.active {
            border-color: #10b981;
            transform: scale(1.05);
        }

        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        header {
            z-index: 50;
        }

        #api-key-section {
            z-index: 40;
        }

        main {
            padding-top: 68px;
            /* Height of header */
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header id="header" class="bg-white/80 backdrop-blur-lg fixed top-0 left-0 right-0 shadow-sm">
        <div class="container mx-auto px-6 h-[68px] flex justify-between items-center">
            <a href="#" data-page="home" class="page-link text-2xl font-bold text-gradient">EcoSense</a>
            <nav class="hidden md:flex items-center space-x-8">
                <a data-page="home" class="nav-link page-link text-slate-600 font-medium active">Home</a>
                <a data-page="compare" class="nav-link page-link text-slate-600 font-medium">Compare</a>
                <a data-page="blog" class="nav-link page-link text-slate-600 font-medium">Blog</a>
                <a data-page="contact" class="nav-link page-link text-slate-600 font-medium">Contact</a>
            </nav>
            <div class="flex items-center gap-4">
                <a href="#preorder" data-page="home"
                    class="preorder-nav-link hidden md:inline-block bg-emerald-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-emerald-600 transition-colors">Pre-Order</a>
                <div id="cart-icon-container" class="relative hidden">
                    <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">
                        </path>
                    </svg>
                    <span id="cart-count"
                        class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-slate-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 bg-white border-t border-slate-200">
            <a data-page="home" class="block py-2 nav-link page-link text-slate-600 font-medium">Home</a>
            <a data-page="compare" class="block py-2 nav-link page-link text-slate-600 font-medium">Compare</a>
            <a data-page="blog" class="block py-2 nav-link page-link text-slate-600 font-medium">Blog</a>
            <a data-page="contact" class="block py-2 nav-link page-link text-slate-600 font-medium">Contact</a>
            <a href="#preorder" data-page="home"
                class="preorder-nav-link block mt-2 text-center bg-emerald-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-emerald-600 transition-colors">Pre-Order</a>
        </div>
    </header>

    <main>
        <!-- API Key Setup Section -->
        <div id="api-key-section" class="bg-white py-4 shadow-md">
            <div class="container mx-auto px-6">
                <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-700 p-4 rounded-r-lg" role="alert">
                    <p class="font-bold">Enable AI Features</p>
                    <p>To use the AI-powered features on your local machine, please enter your Google Gemini API key
                        below. You can get a free key from <a href="https://aistudio.google.com/app/apikey"
                            target="_blank" class="font-semibold underline">Google AI Studio</a>.</p>
                    <div class="mt-3 flex gap-2"><input type="text" id="api-key-input"
                            placeholder="Enter your Gemini API Key"
                            class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-amber-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-amber-500"><button
                            id="save-api-key-btn"
                            class="bg-amber-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors">Save
                            Key</button></div>
                    <p id="api-key-status" class="text-sm mt-2"></p>
                </div>
            </div>
        </div>

        <!-- Home Page Content -->
        <div id="home-page" class="page active">
            <!-- Hero Section with Video -->
            <section id="hero" class="relative bg-slate-800 text-white pt-32 pb-24">
                <video autoplay loop muted playsinline
                    class="absolute top-0 left-0 w-full h-full object-cover z-0 opacity-20">
                    <source src="https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4"
                        type="video/mp4">
                </video>
                <div class="container mx-auto px-6 text-center relative z-10">
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">Live Smarter, Not Harder.</h1>
                    <p class="mt-6 max-w-2xl mx-auto text-lg text-slate-300">Discover a new era of home automation. Our
                        intelligent devices save energy, enhance security, and simplify your life.</p>
                    <div class="mt-10 flex justify-center items-center gap-4"><a href="#products"
                            class="bg-emerald-500 text-white font-semibold px-8 py-3 rounded-lg hover:bg-emerald-600 transition-all shadow-lg hover:shadow-xl">Explore
                            Devices</a><a href="#how-it-works"
                            class="bg-white text-emerald-500 font-semibold px-8 py-3 rounded-lg hover:bg-slate-100 transition-all ring-1 ring-inset ring-slate-300">Learn
                            How</a></div>
                </div>
            </section>
            <!-- All other homepage sections -->
            <div id="homepage-sections"></div>
        </div>

        <!-- Other Pages -->
        <div id="compare-page" class="page"></div>
        <div id="blog-post-page" class="page"></div>
        <div id="about-page" class="page"></div>
        <div id="blog-page" class="page"></div>
        <div id="product-detail-page" class="page"></div>
        <div id="contact-page" class="page"></div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="container mx-auto px-6 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <p class="text-lg font-bold text-white">EcoSense</p>
                <div class="flex mt-4 md:mt-0 space-x-6"><a href="#" class="hover:text-white">Twitter</a><a href="#"
                        class="hover:text-white">Facebook</a><a href="#" class="hover:text-white">Instagram</a></div>
            </div>
            <div class="mt-6 border-t border-slate-700 pt-6 text-center text-sm text-slate-400">
                <p>&copy; 2025 EcoSense Technologies. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Global State ---
            let userApiKey = '';
            let comparisonList = [];
            let cartCount = 0;

            // --- Gemini API Call ---
            async function callGemini(prompt, isJson = false) {
                if (!userApiKey) { alert('Please save your Gemini API key first.'); return null; }
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                if (isJson) { payload.generationConfig = { responseMimeType: "application/json", responseSchema: { type: "ARRAY", items: { type: "OBJECT", properties: { title: { type: "STRING" }, description: { type: "STRING" } }, required: ["title", "description"] } } }; }
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${userApiKey}`;
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts) {
                        return isJson ? JSON.parse(result.candidates[0].content.parts[0].text) : result.candidates[0].content.parts[0].text;
                    } else throw new Error("Invalid response structure from Gemini API");
                } catch (error) {
                    console.error("Gemini API call failed:", error);
                    alert("An error occurred with the AI. Check your API key and console.");
                    return null;
                }
            }

            // --- API Key Handler ---
            const apiKeyInput = document.getElementById('api-key-input');
            const saveApiKeyBtn = document.getElementById('save-api-key-btn');
            const apiKeyStatus = document.getElementById('api-key-status');
            saveApiKeyBtn.addEventListener('click', () => {
                const key = apiKeyInput.value.trim();
                if (key) {
                    userApiKey = key;
                    localStorage.setItem('geminiApiKey', key);
                    apiKeyStatus.textContent = 'API Key saved successfully!';
                    apiKeyStatus.classList.remove('text-red-500');
                    apiKeyStatus.classList.add('text-green-600');
                } else {
                    apiKeyStatus.textContent = 'Please enter a valid API Key.';
                    apiKeyStatus.classList.add('text-red-500');
                    apiKeyStatus.classList.remove('text-green-600');
                }
            });
            const savedApiKey = localStorage.getItem('geminiApiKey');
            if (savedApiKey) {
                userApiKey = savedApiKey;
                apiKeyInput.value = savedApiKey;
                apiKeyStatus.textContent = 'API Key loaded from previous session.';
                apiKeyStatus.classList.add('text-green-600');
            }

            // --- Data ---
            const productData = {
                thermostat: { id: 'thermostat', name: 'EcoSense Thermostat', price: 129.99, description: 'The EcoSense Thermostat is a revolutionary device that learns your living patterns to optimize heating and cooling...', features: ['Learns your schedule', 'Remote control via app', 'Monthly energy reports', 'Easy installation'], gallery: ['images/thermo.png', 'images/thermo_wall.png', 'images/thermo_app.png'], specs: { connectivity: 'Wi-Fi, Bluetooth', compatibility: 'Alexa, Google Assistant', dimensions: '12cm x 12cm x 3cm' } },
                bulb: { id: 'bulb', name: 'Chroma Smart Bulb', price: 24.99, description: 'Transform any room with the Chroma Smart Bulb. Choose from over 16 million colors...', features: ['16 million colors', 'Dimmable white light', 'Voice control compatible', 'Set schedules and timers'], gallery: ['images/bulb.png', 'images/bulb_wall.png', 'images/bulb_color.png'], specs: { connectivity: 'Wi-Fi', compatibility: 'Alexa, Google Assistant, Hue', dimensions: '6cm x 11cm' } },
                camera: { id: 'camera', name: 'Guardian Eye Camera', price: 99.99, description: 'Keep an eye on what matters most with the Guardian Eye Camera. It offers crystal-clear 4K streaming...', features: ['4K Ultra HD video', 'Smart motion detection', 'Two-way audio', 'Night vision'], gallery: ['images/cam.png', 'images/cam_wall.png', 'images/cam.png'], specs: { connectivity: 'Wi-Fi, Ethernet', compatibility: 'Alexa, Google Assistant, NVR', dimensions: '8cm x 8cm x 15cm' } }
            };
            const blogData = {
                'summer-savings': { title: '5 Ways a Smart Thermostat Can Lower Your Summer Energy Bills', date: 'June 25, 2025', content: `<p>As temperatures rise, so do air conditioning costs. But what if your home could automatically adapt to keep you cool without wasting energy? Here are five ways the EcoSense Thermostat helps you save...</p><h3 class="text-xl font-bold mt-6 mb-2">1. Smart Scheduling</h3><p>Don't cool an empty house. Our thermostat learns your routine and adjusts the temperature automatically when you're away, then cools it down just before you get back.</p><h3 class="text-xl font-bold mt-6 mb-2">2. Geofencing</h3><p>Using your phone's location, the EcoSense app can detect when the last person has left home and set the thermostat to an energy-saving mode. It's automation at its finest.</p><h3 class="text-xl font-bold mt-6 mb-2">3. Usage Reports</h3><p>Knowledge is power. Our detailed monthly reports show you exactly when you're using the most energy, helping you identify patterns and make smarter choices to reduce consumption.</p>` },
                'creative-bulbs': { title: 'Beyond the Basics: Creative Uses for Your Chroma Smart Bulbs', date: 'May 18, 2025', content: `<p>You already know you can change their color. But your smart bulbs are capable of so much more. From syncing with your music to gently waking you up in the morning, let's explore some creative hacks...</p><h3 class="text-xl font-bold mt-6 mb-2">1. Gentle Wake-Up</h3><p>Instead of a jarring alarm, schedule your bedroom lights to slowly fade in over 15 minutes, mimicking a natural sunrise. It's a much more pleasant way to start your day.</p><h3 class="text-xl font-bold mt-6 mb-2">2. Security Deterrent</h3><p>When you're on vacation, set a schedule for your lights to turn on and off in different rooms, making it look like someone is home. It's a simple and effective security measure.</p>` }
            };

            // --- Page Rendering & Navigation ---
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link.page-link');

            function showPage(pageId, context) {
                pages.forEach(p => p.classList.remove('active'));
                const newPage = document.getElementById(pageId + '-page');
                if (newPage) {
                    if (pageId === 'product-detail') renderProductDetail(context);
                    else if (pageId === 'blog-post') renderBlogPost(context);
                    else if (pageId === 'compare') renderComparisonTable();
                    else if (pageId === 'blog') renderBlogList();
                    else if (pageId === 'contact') renderContactPage();
                    else if (pageId === 'about') renderAboutPage();

                    newPage.classList.add('active');
                }
                navLinks.forEach(link => { link.classList.toggle('active', link.dataset.page === pageId); });
                if (pageId !== 'home') { document.getElementById('homepage-sections').innerHTML = ''; }
                else { renderHomepageSections(); }
                window.scrollTo(0, 0);
            }

            document.querySelectorAll('.page-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.dataset.page;
                    if (pageId) showPage(pageId);
                    document.getElementById('mobile-menu').classList.add('hidden');
                });
            });
            document.querySelectorAll('.preorder-nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    showPage('home');
                    setTimeout(() => document.getElementById('preorder').scrollIntoView({ behavior: 'smooth' }), 100);
                });
            });

            // --- Component Renderers ---
            function renderHomepageSections() {
                const container = document.getElementById('homepage-sections');
                if (container.innerHTML !== '') return;
                container.innerHTML = `
                    <section id="how-it-works" class="section fade-in-section bg-white"><div class="container mx-auto px-6"><div class="text-center mb-16"><h2 class="text-3xl md:text-4xl font-bold">Get Started in 3 Easy Steps</h2><p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Transforming your home is simpler than you think.</p></div><div class="relative"><div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-slate-300 -translate-y-1/2"></div><div class="relative grid md:grid-cols-3 gap-12"><div class="text-center"><div class="relative inline-block"><div class="w-24 h-24 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mx-auto"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg></div><span class="absolute -top-2 -right-2 w-8 h-8 bg-emerald-500 text-white font-bold rounded-full flex items-center justify-center border-4 border-white">1</span></div><h3 class="mt-6 text-xl font-bold">Install Your Device</h3><p class="mt-2 text-slate-600">Our products are designed for easy, DIY installation.</p></div><div class="text-center"><div class="relative inline-block"><div class="w-24 h-24 rounded-full bg-cyan-100 text-cyan-600 flex items-center justify-center mx-auto"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h.01"/><path d="M2.48 12.5a9.5 9.5 0 1 1 19.02 0"/><path d="M12 4.02v.01"/><path d="M7.03 7.03v.01"/><path d="M4.02 12v.01"/><path d="M7.03 16.97v.01"/><path d="M16.97 16.97v.01"/><path d="M20 12v.01"/><path d="M16.97 7.03v.01"/></svg></div><span class="absolute -top-2 -right-2 w-8 h-8 bg-cyan-500 text-white font-bold rounded-full flex items-center justify-center border-4 border-white">2</span></div><h3 class="mt-6 text-xl font-bold">Connect to the App</h3><p class="mt-2 text-slate-600">Download the EcoSense app and connect your devices in minutes.</p></div><div class="text-center"><div class="relative inline-block"><div class="w-24 h-24 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center mx-auto"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M12 11a3 3 0 1 0-3-3"/><path d="M12 12a2 2 0 1 0-2-2"/></svg></div><span class="absolute -top-2 -right-2 w-8 h-8 bg-amber-500 text-white font-bold rounded-full flex items-center justify-center border-4 border-white">3</span></div><h3 class="mt-6 text-xl font-bold">Save and Simplify</h3><p class="mt-2 text-slate-600">Enjoy a more comfortable, secure, and energy-efficient home.</p></div></div></div></div></section>
                    <section id="calculator-section" class="section fade-in-section"><div class="container mx-auto px-6"><div class="bg-white rounded-2xl shadow-xl overflow-hidden lg:grid lg:grid-cols-2 items-center"><div class="p-8 md:p-12 lg:p-16"><h2 class="text-3xl md:text-4xl font-bold">See Your Potential Savings</h2><p class="mt-4 text-lg text-slate-600">Use our calculator to estimate how much you could save on your energy bills.</p><div class="mt-8 space-y-4"><div><label for="bill-input" class="block text-sm font-medium leading-6">Your Average Monthly Electricity Bill ($)</label><input type="range" id="bill-slider" min="50" max="500" value="150" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer"><input type="number" id="bill-input" value="150" class="mt-2 block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500"></div></div></div><div class="bg-emerald-500 p-8 md:p-12 lg:p-16 text-center text-white"><p class="text-lg font-medium opacity-80">You could save up to</p><p id="savings-output" class="text-5xl md:text-7xl font-extrabold my-2">$360</p><p class="text-lg font-medium opacity-80">per year!</p><p class="text-sm mt-4 opacity-70">*Based on up to 20% estimated annual savings.</p></div></div></div></section>
                    <section id="products" class="section fade-in-section bg-slate-50"><div class="container mx-auto px-6"><div class="text-center mb-12"><h2 class="text-3xl md:text-4xl font-bold">Our Flagship Products</h2><p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Engineered for performance, designed for your home.</p></div><div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="product-list"></div><div class="text-center mt-12"><button id="compare-btn" class="hidden bg-cyan-500 text-white font-semibold px-8 py-3 rounded-lg hover:bg-cyan-600 transition-all shadow-lg">Compare Selected (<span id="compare-count">0</span>)</button></div></div></section>
                    <section id="testimonials" class="section fade-in-section bg-white"><div class="container mx-auto px-6"><div class="text-center mb-12"><h2 class="text-3xl md:text-4xl font-bold">What Our Users Say</h2><p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">We've helped thousands of households live smarter.</p></div><div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"><div class="card-hover bg-slate-50 p-8 rounded-xl shadow-md flex flex-col text-center"><img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?q=80&w=1976&auto=format&fit=crop" alt="Sarah J." class="w-20 h-20 rounded-full mx-auto mb-4 object-cover"><p class="text-slate-600 italic flex-grow">"The EcoSense thermostat was a game-changer. My energy bills are noticeably lower, and the house is always comfortable."</p><p class="mt-4 font-bold">- Sarah J.</p></div><div class="card-hover bg-slate-50 p-8 rounded-xl shadow-md flex flex-col text-center"><img src="https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=1974&auto=format&fit=crop" alt="Mike T." class="w-20 h-20 rounded-full mx-auto mb-4 object-cover"><p class="text-slate-600 italic flex-grow">"I love being able to control the lighting from my phone. Setting up different 'scenes' for movies or dinner is so cool."</p><p class="mt-4 font-bold">- Mike T.</p></div><div class="card-hover bg-slate-50 p-8 rounded-xl shadow-md flex flex-col text-center"><img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1976&auto=format&fit=crop" alt="David L." class="w-20 h-20 rounded-full mx-auto mb-4 object-cover"><p class="text-slate-600 italic flex-grow">"The Guardian Eye camera gives me such peace of mind. The video quality is amazing, even at night."</p><p class="mt-4 font-bold">- David L.</p></div></div></div></section>
                    <section id="preorder" class="section fade-in-section bg-slate-50"><div class="container mx-auto px-6"><div class="bg-slate-800 text-white rounded-2xl shadow-xl overflow-hidden lg:grid lg:grid-cols-2 items-center"><div class="p-8 md:p-12 lg:p-16"><div id="preorder-form-wrapper"><h2 class="text-3xl md:text-4xl font-bold">Coming Soon: The EcoSense Hub Max</h2><p class="mt-4 text-lg text-slate-300">The ultimate command center for your smart home. Be the first to get it.</p><form id="preorder-form" class="mt-8 space-y-4"><div><input type="email" name="preorder_email" required class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 bg-slate-100 shadow-sm ring-1 ring-inset ring-slate-600 placeholder:text-gray-500 focus:ring-2 focus:ring-inset focus:ring-emerald-500" placeholder="Enter your email to pre-order"></div><div><button type="submit" class="w-full bg-emerald-500 font-semibold px-8 py-3 rounded-lg hover:bg-emerald-600 transition-all shadow-lg hover:shadow-xl">Notify Me & Pre-Order</button></div></form></div><div id="preorder-success-message" class="hidden text-center"><h2 class="text-3xl font-bold text-emerald-400">You're on the list!</h2><p class="mt-4 text-lg text-slate-300">Thank you for your interest. We'll notify you the moment the EcoSense Hub Max is available for purchase.</p></div></div><div class="h-64 lg:h-full"><img src="images/smart_home.jpg" class="h-full w-full object-cover" alt="A futuristic smart home hub device"></div></div></div></section>
                `;
                // Re-attach event listeners for dynamically added content
                document.getElementById('bill-input').addEventListener('input', (e) => { document.getElementById('bill-slider').value = e.target.value; updateSavings(); });
                document.getElementById('bill-slider').addEventListener('input', (e) => { document.getElementById('bill-input').value = e.target.value; updateSavings(); });
                document.getElementById('compare-btn').addEventListener('click', () => { showPage('compare'); });
                document.getElementById('preorder-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    document.getElementById('preorder-form-wrapper').classList.add('hidden');
                    document.getElementById('preorder-success-message').classList.remove('hidden');
                });
                renderProducts();
                document.querySelectorAll('.fade-in-section').forEach(section => { observer.observe(section); });
            }

            function renderProducts() {
                const container = document.getElementById('product-list');
                if (!container) return;
                container.innerHTML = '';
                Object.values(productData).forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'card-hover bg-white border border-slate-200 rounded-xl overflow-hidden flex flex-col shadow-md';
                    card.innerHTML = `<img src="${product.gallery[0]}" alt="${product.name}" class="w-full h-48 object-cover"><div class="p-6 flex flex-col flex-grow"><h3 class="text-xl font-bold">${product.name}</h3><p class="mt-2 text-slate-600 flex-grow">${product.description.substring(0, 100)}...</p><div class="flex justify-between items-center mt-4"><button class="product-link text-emerald-500 font-semibold hover:text-emerald-600" data-product-id="${product.id}">Learn More &rarr;</button><div class="flex items-center"><label for="compare-${product.id}" class="text-sm text-slate-500 mr-2">Compare</label><input type="checkbox" id="compare-${product.id}" data-product-id="${product.id}" class="compare-checkbox h-5 w-5 rounded text-emerald-500 focus:ring-emerald-500 bg-slate-200 border-slate-300"></div></div></div>`;
                    container.appendChild(card);
                });
                attachProductEventListeners();
            }

            function renderComparisonTable() {
                const container = document.getElementById('compare-page');
                if (comparisonList.length < 2) {
                    container.innerHTML = `<section class="section"><div class="container mx-auto px-6 text-center"><h1 class="text-4xl md:text-5xl font-extrabold">Product Comparison</h1><p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Please select at least two products from the homepage to compare.</p></div></section>`;
                    return;
                }
                const productsToCompare = comparisonList.map(id => productData[id]);
                const features = ['Price', 'Connectivity', 'Compatibility', 'Dimensions'];
                let tableHTML = `<section class="section"><div class="container mx-auto px-6"><div class="text-center mb-12"><h1 class="text-4xl md:text-5xl font-extrabold">Product Comparison</h1></div><div class="overflow-x-auto"><table class="w-full text-left border-collapse"><thead class="bg-slate-100"><tr class="text-slate-800">`;
                tableHTML += `<th class="p-4 border-b-2 border-slate-200 font-semibold">Feature</th>`;
                productsToCompare.forEach(p => { tableHTML += `<th class="p-4 border-b-2 border-slate-200 font-semibold text-center">${p.name}</th>`; });
                tableHTML += `</tr></thead><tbody>`;
                features.forEach(feature => {
                    tableHTML += `<tr class="border-b border-slate-200"><td class="p-4 font-medium">${feature}</td>`;
                    productsToCompare.forEach(p => {
                        let value = feature === 'Price' ? `$${p.price.toFixed(2)}` : p.specs[feature.toLowerCase()] || 'N/A';
                        tableHTML += `<td class="p-4 text-center">${value}</td>`;
                    });
                    tableHTML += `</tr>`;
                });
                tableHTML += `</tbody></table></div></div></section>`;
                container.innerHTML = tableHTML;
            }

            function renderProductDetail(productId) {
                const container = document.getElementById('product-detail-page');
                const product = productData[productId];
                if (!product) return;
                container.innerHTML = `<section class="section bg-white"><div class="container mx-auto px-6"><button class="page-link mb-8 font-semibold text-emerald-600" data-page="home">&larr; Back to all products</button><div class="grid md:grid-cols-2 gap-12 lg:gap-16 items-start"><div><img id="main-product-image" src="${product.gallery[0]}" alt="${product.name}" class="rounded-xl shadow-lg w-full mb-4"><div id="product-gallery" class="grid grid-cols-4 gap-2">${product.gallery.map((img, index) => `<img src="${img}" class="gallery-thumbnail rounded-md h-24 w-full object-cover ${index === 0 ? 'active' : ''}" data-src="${img}">`).join('')}</div></div><div><h1 class="text-4xl font-bold">${product.name}</h1><p class="text-3xl text-gradient font-bold mt-2">$${product.price.toFixed(2)}</p><p class="mt-6 text-lg text-slate-600">${product.description}</p><ul class="mt-6 space-y-2">${product.features.map(feature => `<li class="flex items-center"><svg class="w-5 h-5 text-emerald-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><span>${feature}</span></li>`).join('')}</ul><button class="add-to-cart-btn mt-8 w-full bg-emerald-500 text-white font-semibold px-8 py-3 rounded-lg hover:bg-emerald-600 transition-all shadow-lg hover:shadow-xl" data-product-id="${product.id}">Add to Cart</button></div></div>
                <div class="mt-16 bg-slate-50 p-8 rounded-xl border border-emerald-200">
                    <h3 class="text-2xl font-bold text-slate-800">✨ Smart Setup Helper</h3>
                    <p class="text-slate-600 mt-2">Describe your home, and our AI will give you personalized installation tips for the ${product.name}.</p>
                    <div class="mt-4 space-y-4">
                        <textarea id="setup-prompt-input" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500" rows="3" placeholder="e.g., 'I have a 2-story house with brick walls. Where's the best place for the camera?'"></textarea>
                        <button id="get-setup-advice-btn" data-product-name="${product.name}" class="inline-flex items-center gap-2 bg-emerald-500 text-white font-semibold px-6 py-2 rounded-lg hover:bg-emerald-600 transition-all shadow disabled:bg-slate-400 disabled:cursor-not-allowed">Get Personalized Setup Advice</button>
                        <div id="setup-advice-loader" class="hidden"><div class="loader"></div></div>
                        <div id="setup-advice-output" class="mt-4 p-4 bg-white rounded-lg border border-slate-200 text-slate-700 whitespace-pre-wrap"></div>
                    </div>
                </div>
                </div></section>`;
                container.querySelector('.page-link').addEventListener('click', (e) => { e.preventDefault(); showPage('home'); });
                container.querySelectorAll('.gallery-thumbnail').forEach(thumb => {
                    thumb.addEventListener('click', () => {
                        container.querySelector('#main-product-image').src = thumb.dataset.src;
                        container.querySelectorAll('.gallery-thumbnail').forEach(t => t.classList.remove('active'));
                        thumb.classList.add('active');
                    });
                });
                container.querySelector('.add-to-cart-btn').addEventListener('click', handleAddToCart);
                container.querySelector('#get-setup-advice-btn').addEventListener('click', handleGetSetupAdvice);
            }

            function renderBlogList() {
                const container = document.getElementById('blog-page');
                let listHTML = '';
                Object.keys(blogData).forEach(blogId => {
                    const post = blogData[blogId];
                    listHTML += `<article class="card-hover bg-white p-8 rounded-xl shadow-md"><p class="text-sm text-slate-500">${post.date}</p><h2 class="mt-2 text-2xl font-bold hover:text-emerald-600"><a href="#" class="blog-link" data-blog-id="${blogId}">${post.title}</a></h2><p class="mt-3 text-slate-600">${post.content.substring(0, 150)}...</p><a href="#" class="blog-link mt-4 inline-block text-emerald-500 font-semibold" data-blog-id="${blogId}">Read More &rarr;</a></article>`;
                });
                container.innerHTML = `<section class="section bg-slate-50"><div class="container mx-auto px-6"><div class="text-center mb-12"><h1 class="text-4xl md:text-5xl font-extrabold">The EcoSense Blog</h1><p class="mt-4 max-w-2xl mx-auto text-lg text-slate-600">Tips, tricks, and insights into the world of smart home technology.</p></div>
                <div class="max-w-3xl mx-auto mb-12 text-center"><div class="bg-white p-6 rounded-xl shadow-md border border-emerald-200"><h3 class="text-xl font-bold text-slate-800">Need some inspiration?</h3><p class="text-slate-600 mt-2">Click the button to generate new blog post ideas with AI.</p><button id="generate-ideas-btn" class="mt-4 inline-flex items-center gap-2 bg-emerald-500 text-white font-semibold px-6 py-2 rounded-lg hover:bg-emerald-600 transition-all shadow-lg disabled:bg-slate-400 disabled:cursor-not-allowed">✨ Generate New Blog Ideas</button><div id="blog-ideas-loader" class="mt-4 hidden"><div class="loader mx-auto"></div></div><div id="blog-ideas-container" class="mt-6 text-left space-y-3"></div></div></div>
                <div class="max-w-3xl mx-auto space-y-12">${listHTML}</div></div></section>`;
                container.querySelectorAll('.blog-link').forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); showPage('blog-post', e.target.dataset.blogId); }); });
                container.querySelector('#generate-ideas-btn').addEventListener('click', handleGenerateBlogIdeas);
            }

            function renderBlogPost(blogId) {
                const container = document.getElementById('blog-post-page');
                const post = blogData[blogId];
                if (!post) return;
                container.innerHTML = `<section class="section bg-white"><div class="container mx-auto px-6 max-w-3xl"><button class="page-link mb-8 font-semibold text-emerald-600" data-page="blog">&larr; Back to Blog</button><h1 class="text-4xl md:text-5xl font-extrabold">${post.title}</h1><p class="mt-4 text-slate-500">${post.date}</p><div class="prose max-w-none mt-8 text-lg text-slate-700">${post.content}</div></div></section>`;
                container.querySelector('.page-link').addEventListener('click', (e) => { e.preventDefault(); showPage('blog'); });
            }

            function renderContactPage() {
                const container = document.getElementById('contact-page');
                container.innerHTML = `<section id="contact" class="section bg-slate-50"><div class="container mx-auto px-6"><div class="bg-white rounded-2xl shadow-xl overflow-hidden lg:grid lg:grid-cols-2"><div class="p-8 md:p-12 lg:p-16"><div id="contact-form-wrapper"><h2 class="text-3xl md:text-4xl font-bold">Ready to Upgrade Your Home?</h2><p class="mt-4 text-lg text-slate-600">Our team is here to help. Describe what you're looking for below, and our AI assistant can help you draft a message.</p>
                <div class="mt-8 space-y-4 bg-slate-50 p-6 rounded-lg border"><div><label for="ai-prompt-input" class="block text-sm font-medium leading-6 text-gray-900">What are your smart home goals?</label><div class="mt-2"><input type="text" id="ai-prompt-input" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500" placeholder="e.g., 'Save money and improve security'"></div></div><button id="draft-message-btn" class="inline-flex items-center gap-2 w-full justify-center bg-cyan-500 text-white font-semibold px-6 py-2 rounded-lg hover:bg-cyan-600 transition-all shadow disabled:bg-slate-400 disabled:cursor-not-allowed">✨ Ask AI to Draft My Message</button><div id="draft-message-loader" class="text-center hidden"><div class="loader mx-auto"></div></div></div>
                <form id="contact-form" class="mt-8 space-y-6"><div><input type="text" name="name" required class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500" placeholder="Full Name"></div><div><input type="email" name="email" required class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500" placeholder="Email Address"></div><div><textarea name="message" id="message" rows="4" required class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-500" placeholder="Your Message"></textarea></div><div><button type="submit" class="w-full bg-emerald-500 text-white font-semibold px-8 py-3 rounded-lg hover:bg-emerald-600">Send Message</button></div></form></div><div id="contact-success-message" class="hidden text-center"><h2 class="text-3xl font-bold text-emerald-500">Thank You!</h2><p class="mt-4 text-lg text-slate-600">We've received your message. Our team will reach out to you shortly.</p><button id="reset-contact-form-btn" class="mt-8 bg-cyan-500 text-white font-semibold px-6 py-2 rounded-lg hover:bg-cyan-600">Send Another Message</button></div></div><div class="hidden lg:block"><img src="images/hub.jpg" class="h-full w-full object-cover" alt="A modern, smart home interior"></div></div></div></section>`;
                document.getElementById('contact-form').addEventListener('submit', handleContactSubmit);
                document.getElementById('reset-contact-form-btn').addEventListener('click', () => {
                    document.getElementById('contact-success-message').classList.add('hidden');
                    document.getElementById('contact-form-wrapper').classList.remove('hidden');
                    document.getElementById('contact-form').reset();
                });
                document.getElementById('draft-message-btn').addEventListener('click', handleDraftMessage);
            }

            function renderAboutPage() {
                const container = document.getElementById('about-page');
                container.innerHTML = `<section class="section bg-white"><div class="container mx-auto px-6"><div class="text-center"><h1 class="text-4xl md:text-5xl font-extrabold">Our Mission is a Smarter Planet</h1><p class="mt-6 max-w-3xl mx-auto text-lg text-slate-600">We believe technology should simplify life and preserve our world. EcoSense was founded on the principle that a smart home can also be a sustainable home.</p></div><div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-16 items-center"><img src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=2070&auto=format&fit=crop" alt="A diverse team collaborating" class="rounded-xl shadow-lg"><div><h2 class="text-3xl font-bold">Driven by Innovation</h2><p class="mt-4 text-slate-600">Our team of engineers, designers, and visionaries work tirelessly to push the boundaries of home automation. We're not just building devices; we're building the future of living.</p></div></div></div></section>`;
            }

            // --- Event Handlers ---
            function handleAddToCart(event) {
                const button = event.target;
                cartCount++;
                const cartIconContainer = document.getElementById('cart-icon-container');
                const cartCountElement = document.getElementById('cart-count');
                cartIconContainer.classList.remove('hidden');
                cartCountElement.textContent = cartCount;
                button.textContent = 'Added ✓';
                button.disabled = true;
                button.classList.add('bg-green-600', 'cursor-not-allowed');
            }
            function handleContactSubmit(e) {
                e.preventDefault();
                document.getElementById('contact-form-wrapper').classList.add('hidden');
                document.getElementById('contact-success-message').classList.remove('hidden');
            }
            function attachProductEventListeners() {
                document.querySelectorAll('.product-link').forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); showPage('product-detail', e.target.dataset.productId); }); });
                document.querySelectorAll('.compare-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        const productId = e.target.dataset.productId;
                        if (e.target.checked) { if (!comparisonList.includes(productId)) comparisonList.push(productId); }
                        else { comparisonList = comparisonList.filter(id => id !== productId); }
                        const count = comparisonList.length;
                        document.getElementById('compare-count').textContent = count;
                        document.getElementById('compare-btn').classList.toggle('hidden', count < 2);
                    });
                });
            }
            function updateSavings() {
                const billInput = document.getElementById('bill-input');
                const savingsOutput = document.getElementById('savings-output');
                if (!billInput || !savingsOutput) return;
                const bill = parseFloat(billInput.value);
                const savings = bill * 12 * 0.20;
                savingsOutput.textContent = `$${Math.round(savings)}`;
            }
            async function handleGetSetupAdvice(event) {
                const button = event.target;
                const productName = button.dataset.productName;
                const userInput = document.getElementById('setup-prompt-input').value;
                const loader = document.getElementById('setup-advice-loader');
                const outputContainer = document.getElementById('setup-advice-output');
                if (!userInput) { outputContainer.textContent = "Please describe your home setup first."; return; }
                button.disabled = true; loader.classList.remove('hidden'); outputContainer.textContent = '';
                const prompt = `You are a friendly and helpful technical support expert for EcoSense, a smart home company. A customer is planning to install the "${productName}". The customer describes their situation as: "${userInput}". Provide simple, clear, and actionable installation tips for them. Use bullet points or numbered lists for clarity. Focus on practical advice.`;
                const response = await callGemini(prompt);
                if (response) { outputContainer.textContent = response; } else { outputContainer.textContent = "Sorry, I couldn't get advice right now. Please try again later."; }
                loader.classList.add('hidden'); button.disabled = false;
            }
            async function handleGenerateBlogIdeas() {
                const button = document.getElementById('generate-ideas-btn');
                const loader = document.getElementById('blog-ideas-loader');
                const container = document.getElementById('blog-ideas-container');
                button.disabled = true; loader.classList.remove('hidden'); container.innerHTML = '';
                const prompt = "Generate 3 creative and engaging blog post ideas for the EcoSense smart home blog. For each idea, provide a catchy 'title' and a brief 'description' of what the post would be about.";
                const ideas = await callGemini(prompt, true);
                if (ideas && Array.isArray(ideas)) {
                    ideas.forEach(idea => {
                        const article = document.createElement('article');
                        article.className = 'p-4 bg-emerald-50 rounded-lg border border-emerald-200';
                        article.innerHTML = `<h4 class="font-bold text-emerald-800">${idea.title}</h4><p class="text-sm text-emerald-700 mt-1">${idea.description}</p>`;
                        container.appendChild(article);
                    });
                } else { container.innerHTML = `<p class="text-red-500">Sorry, I couldn't generate ideas right now. Please try again.</p>`; }
                loader.classList.add('hidden'); button.disabled = false;
            }
            async function handleDraftMessage() {
                const button = document.getElementById('draft-message-btn');
                const userInput = document.getElementById('ai-prompt-input').value;
                const messageTextarea = document.getElementById('message');
                const loader = document.getElementById('draft-message-loader');
                if (!userInput) { messageTextarea.placeholder = "Please tell us your goals first."; return; }
                button.disabled = true; loader.classList.remove('hidden');
                const prompt = `You are a helpful AI assistant for EcoSense. A customer has described their goals as: "${userInput}". Draft a friendly, professional message for them to send to the EcoSense team. The message should state their goals and ask for recommendations. Keep it concise.`;
                const response = await callGemini(prompt);
                if (response) { messageTextarea.value = response; } else { messageTextarea.placeholder = "Sorry, the AI assistant is unavailable. Please write your own message."; }
                loader.classList.add('hidden'); button.disabled = false;
            }

            // --- Initial Setup ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('is-visible'); });
            }, { threshold: 0.1 });

            showPage('home');
            document.getElementById('mobile-menu-button').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));
        });
    </script>

</body>

</html>